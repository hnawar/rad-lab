/*! For license information please see 9ebc9d75.2379b129.js.LICENSE.txt */
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3812],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=o.createContext({}),s=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=a,f=d["".concat(p,".").concat(m)]||d[m]||c[m]||r;return n?o.createElement(f,i(i({ref:t},u),{},{components:n})):o.createElement(f,i({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7847:(e,t,n)=>{n.r(t),n.d(t,{ProjectIdInput:()=>b,ProjectIdLink:()=>g,ProjectIdText:()=>k,assets:()=>m,contentTitle:()=>c,default:()=>v,frontMatter:()=>u,metadata:()=>d,toc:()=>h});var o=n(7462),a=n(7294),r=n(3905);const i=e=>{let t;const n=new Set,o=(e,o)=>{const a="function"==typeof e?e(t):e;if(a!==t){const e=t;t=o?a:Object.assign({},t,a),n.forEach((n=>n(t,e)))}},a=()=>t,r={setState:o,getState:a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(o,a,r),r};var l=n(2798);const{useSyncExternalStoreWithSelector:p}=l;const s=e=>{const t="function"==typeof e?(e=>e?i(e):i)(e):e,n=(e,n)=>function(e,t=e.getState,n){const o=p(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return(0,a.useDebugValue)(o),o}(t,e,n);return Object.assign(n,t),n};const u={sidebar_position:4,title:"04 - Web Application"},c=void 0,d={unversionedId:"rad-lab-ui/ui_installation/frontend",id:"rad-lab-ui/ui_installation/frontend",title:"04 - Web Application",description:"The RAD Lab UI application is a Firebase application, which requires a number of manual steps to complete the installation.",source:"@site/docs/rad-lab-ui/ui_installation/frontend.mdx",sourceDirName:"rad-lab-ui/ui_installation",slug:"/rad-lab-ui/ui_installation/frontend",permalink:"/rad-lab/docs/rad-lab-ui/ui_installation/frontend",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"04 - Web Application"},sidebar:"tutorialSidebar",previous:{title:"03 - Infrastructure",permalink:"/rad-lab/docs/rad-lab-ui/ui_installation/infrastructure"},next:{title:"05 - Publishing Modules",permalink:"/rad-lab/docs/rad-lab-ui/ui_installation/publishing-modules"}},m={},f=(e=>e?s(e):s)((e=>({projectId:"",setProjectId:t=>e({projectId:t})}))),h=[{value:"Add Firebase",id:"add-firebase",level:2},{value:"Manually",id:"manually",level:3},{value:"Command Line",id:"command-line",level:3},{value:"Configure the Webapp",id:"configure-the-webapp",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Firebase app",id:"firebase-app",level:3},{value:"RAD Lab UI Configuration",id:"rad-lab-ui-configuration",level:3},{value:"Deploy Webapp",id:"deploy-webapp",level:2},{value:"RAD Lab UI Webpage",id:"rad-lab-ui-webpage",level:2}],b=()=>{const e=f((e=>e.setProjectId));return(0,r.kt)("div",null,(0,r.kt)("label",{htmlFor:"projectId",name:"projectId"},"RAD Lab UI Project ID"),(0,r.kt)("input",{id:"projectId",style:{borderRadius:"0.25rem",padding:"0.5rem",fontSize:"1rem",marginLeft:"1rem",marginBottom:"1rem"},type:"text",onChange:t=>e(t.target.value)}))},g=e=>{let{href:t,fallback:n,children:o}=e;const a=f((e=>e.projectId)),i=""!==a?t.replace("${RLUI_PROJECT_ID}",a):n;return(0,r.kt)("a",{href:i},o)},k=e=>{let{success:t,fallback:n,children:o}=e;const a=f((e=>e.projectId));return a?t(a):n},y={toc:h,ProjectIdInput:b,ProjectIdLink:g,ProjectIdText:k};function v(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"rad-lab-ui-webapp"},"RAD Lab UI Webapp"),(0,r.kt)("p",null,"The RAD Lab UI application is a Firebase application, which requires a number of manual steps to complete the installation."),(0,r.kt)("p",null,"To retrieve the correct project ID, either open a web browser and go to the ",(0,r.kt)("a",{parentName:"p",href:"https://console.cloud.google.com"},"Google Cloud console")," or run the following command in the ",(0,r.kt)("inlineCode",{parentName:"p"},"radlab-ui/automation/terraform/infrastructure")," folder:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'echo "$(terraform show -json | jq -r .values.outputs.project_id.value)"\n')),(0,r.kt)("admonition",{title:"Dynamic Documentation",type:"important"},(0,r.kt)("p",{parentName:"admonition"},"Add your Project ID here to have the documentation be be customized to your Google Cloud project")),(0,r.kt)(b,{mdxType:"ProjectIdInput"}),(0,r.kt)("h2",{id:"add-firebase"},"Add Firebase"),(0,r.kt)("admonition",{title:"First time",type:"important"},(0,r.kt)("p",{parentName:"admonition"},"If you have never used Firebase in your Google Cloud organization, you need to manually add it to the Google Cloud project created in the first step. This is necessary as you have to accept the Terms & Conditions first.")),(0,r.kt)("h3",{id:"manually"},"Manually"),(0,r.kt)("p",null,"Open the ",(0,r.kt)("a",{parentName:"p",href:"https://console.firebase.google.com"},"Firebase console"),' and click on "Create a project" (or add Firebase to an existing project). When prompted with "Enter your project name", enter the project ID you copied from the previous step, and accept the Firebase terms and conditions. Confirm the Firebase billing plan when prompted (and if necessary) and step through the remaining steps in the wizard.'),(0,r.kt)("p",null,"NOTE: Firebase analytics does not impact the deployment of the RAD Lab UI application, so feel free to select whatever you think makes most sense for your deployment."),(0,r.kt)("h3",{id:"command-line"},"Command Line"),(0,r.kt)("p",null,"Run the following commands in a terminal or command window:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Replace [PROJECT_ID] with the actual project ID.\nexport RLUI_PROJECT_ID=$(terraform show -json | jq -r .values.outputs.project_id.value)\n\n# Install Firebase Tools\nnpm install --location=global firebase-tools\n\n# Switch to the webapp directory\ncd ../../../webapp\n\n# Login to Firebase. If you are already logged in with the correct user, feel free to continue. If not, run firebase login:add and firebase login:use to select the correct user.\nfirebase login\n\n# Add Firebase to the Google Cloud project\nfirebase projects:addfirebase ${RLUI_PROJECT_ID}\n\n# Set the RAD Lab UI project as the default project\nfirebase use ${RLUI_PROJECT_ID}\n\n# Upload Firestore rules\nfirebase deploy --only firestore:rules\n\n# Upload Firestore indexes\nfirebase deploy --only firestore:indexes\n")),(0,r.kt)("h2",{id:"configure-the-webapp"},"Configure the Webapp"),(0,r.kt)("p",null,"For these next steps, open the ",(0,r.kt)(g,{href:"https://console.firebase.google.com/project/${RLUI_PROJECT_ID}/settings/general",fallback:"https://console.firebase.google.com",mdxType:"ProjectIdLink"},"Firebase Console")," and open the Project that corresponds to ",(0,r.kt)(k,{success:e=>(0,r.kt)("code",null,e),fallback:(0,r.kt)("code",null,"$RLUI_PROJECT_ID"),mdxType:"ProjectIdText"}),"."),(0,r.kt)("h3",{id:"authentication"},"Authentication"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Click on ",(0,r.kt)("strong",{parentName:"li"},"Project Overview")," in the sidebar on the left"),(0,r.kt)("li",{parentName:"ol"},"On the page that opens, click on ",(0,r.kt)("strong",{parentName:"li"},"Authentication")),(0,r.kt)("li",{parentName:"ol"},"Click on ",(0,r.kt)("strong",{parentName:"li"},"Get Started"),", ",(0,r.kt)("strong",{parentName:"li"},"Sign-in method")," and select ",(0,r.kt)("strong",{parentName:"li"},"Google")," underneath ",(0,r.kt)("strong",{parentName:"li"},"Additional providers")),(0,r.kt)("li",{parentName:"ol"},"Click on ",(0,r.kt)("strong",{parentName:"li"},"Enable")," and provide a valid ",(0,r.kt)("strong",{parentName:"li"},"Project support email")),(0,r.kt)("li",{parentName:"ol"},"Click on ",(0,r.kt)("strong",{parentName:"li"},"Save"))),(0,r.kt)("p",null,"As a final step, go Authentication > Settings and click on ",(0,r.kt)("strong",{parentName:"p"},"Authorized domains"),". Add the domain of the App Engine application: ",(0,r.kt)(k,{success:e=>(0,r.kt)("code",null,e,".uc.r.appspot.com"),fallback:(0,r.kt)("code",null,"$RLUI_PROJECT_ID.uc.r.appspot.com"),mdxType:"ProjectIdText"}),". You can also get this value by running the following command in the ",(0,r.kt)("inlineCode",{parentName:"p"},"radlab-ui/automation/terraform/infrastructure")," folder:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'echo "$(cd ../automation/terraform/infrastructure && terraform show -json | jq -r .values.outputs.app_engine_url.value)"\n')),(0,r.kt)("h3",{id:"firebase-app"},"Firebase app"),(0,r.kt)("p",null,"The final step is to add the configuration to your local directory. Navigate to ",(0,r.kt)(g,{href:"https://console.firebase.google.com/project/${RLUI_PROJECT_ID}/settings/general",fallback:"https://console.firebase.google.com",mdxType:"ProjectIdLink"},"Firebase Console")," (Project Settings) and add a Web Application by clicking on the ",(0,r.kt)("inlineCode",{parentName:"p"},"</>"),"-icon at the bottom of the page. Set the ",(0,r.kt)("strong",{parentName:"p"},"App nickname")," to ",(0,r.kt)("strong",{parentName:"p"},"RAD Lab UI"),", click on ",(0,r.kt)("strong",{parentName:"p"},"Register app")," and click on ",(0,r.kt)("strong",{parentName:"p"},"Continue to console"),"."),(0,r.kt)("h3",{id:"rad-lab-ui-configuration"},"RAD Lab UI Configuration"),(0,r.kt)("p",null,"We are now going to create the local configuration files to be able to deploy the web application to your Firebase environment."),(0,r.kt)("admonition",{title:"Environments",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"We are making the assumption here that both development and production will point to the same configuration. If you choose to approach this differently, feel free to update the files and use different values for your ",(0,r.kt)("inlineCode",{parentName:"p"},"development")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"production")," environments.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Firebase Configuration")),(0,r.kt)("p",null,"Run ",(0,r.kt)("inlineCode",{parentName:"p"},"./gen_local_config.sh")," and you will be prompted to provide two values:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Prompt")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Explanation")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Github API URL"),(0,r.kt)("td",{parentName:"tr",align:null},"API URL for your Git repository. This will be in the format ",(0,r.kt)("a",{parentName:"td",href:"https://api.github.com/repos/%7Bowner%7D/%7Brepo_name%7D"},"https://api.github.com/repos/{owner}/{repo_name}"))))),(0,r.kt)("p",null,"This will generate two configuration files, one for local development and one for production development."),(0,r.kt)("h2",{id:"deploy-webapp"},"Deploy Webapp"),(0,r.kt)("p",null,"Run the following commands to deploy the application to your newly created Firebase environment."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Install all components locally\nnpm install\n\n# Deploy the application\nnpm run deploy\n")),(0,r.kt)("h2",{id:"rad-lab-ui-webpage"},"RAD Lab UI Webpage"),(0,r.kt)("p",null,"After successful completion, you should be able to access the RAD Lab UI via ",(0,r.kt)("inlineCode",{parentName:"p"},"$RLUI_PROJECT_ID.uc.r.appspot.com")," in the browser."),(0,r.kt)("p",null,"If you are having issues signing in, please review the ",(0,r.kt)("a",{parentName:"p",href:"../setup-gcp#authorizing-users"},"Authorizing Users")," section."))}v.isMDXComponent=!0},3250:(e,t,n)=>{var o=n(7294);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=o.useState,i=o.useEffect,l=o.useLayoutEffect,p=o.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(o){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=r({inst:{value:n,getSnapshot:t}}),a=o[0].inst,u=o[1];return l((function(){a.value=n,a.getSnapshot=t,s(a)&&u({inst:a})}),[e,n,t]),i((function(){return s(a)&&u({inst:a}),e((function(){s(a)&&u({inst:a})}))}),[e]),p(n),n};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:u},139:(e,t,n)=>{var o=n(7294),a=n(1688);var r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,l=o.useRef,p=o.useEffect,s=o.useMemo,u=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,o,a){var c=l(null);if(null===c.current){var d={hasValue:!1,value:null};c.current=d}else d=c.current;c=s((function(){function e(e){if(!p){if(p=!0,i=e,e=o(e),void 0!==a&&d.hasValue){var t=d.value;if(a(t,e))return l=t}return l=e}if(t=l,r(i,e))return t;var n=o(e);return void 0!==a&&a(t,n)?t:(i=e,l=n)}var i,l,p=!1,s=void 0===n?null:n;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]}),[t,n,o,a]);var m=i(e,c[0],c[1]);return p((function(){d.hasValue=!0,d.value=m}),[m]),u(m),m}},1688:(e,t,n)=>{e.exports=n(3250)},2798:(e,t,n)=>{e.exports=n(139)}}]);