/*! For license information please see 9ebc9d75.f05053b0.js.LICENSE.txt */
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3812],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),f=o,m=d["".concat(s,".").concat(f)]||d[f]||c[f]||a;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7847:(e,t,n)=>{n.r(t),n.d(t,{ProjectIdInput:()=>b,ProjectIdLink:()=>g,ProjectIdText:()=>k,assets:()=>f,contentTitle:()=>c,default:()=>v,frontMatter:()=>u,metadata:()=>d,toc:()=>h});var r=n(7462),o=n(7294),a=n(3905);const i=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(o!==t){const e=t;t=r?o:Object.assign({},t,o),n.forEach((n=>n(t,e)))}},o=()=>t,a={setState:r,getState:o,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,o,a),a};var l=n(2798);const{useSyncExternalStoreWithSelector:s}=l;const p=e=>{const t="function"==typeof e?(e=>e?i(e):i)(e):e,n=(e,n)=>function(e,t=e.getState,n){const r=s(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return(0,o.useDebugValue)(r),r}(t,e,n);return Object.assign(n,t),n};const u={sidebar_position:4,title:"04 - Web Application"},c=void 0,d={unversionedId:"rad-lab-ui/ui_installation/frontend",id:"rad-lab-ui/ui_installation/frontend",title:"04 - Web Application",description:"The RAD Lab UI application is a Firebase application, which requires a number of manual steps to complete the installation.",source:"@site/docs/rad-lab-ui/ui_installation/frontend.mdx",sourceDirName:"rad-lab-ui/ui_installation",slug:"/rad-lab-ui/ui_installation/frontend",permalink:"/rad-lab/docs/rad-lab-ui/ui_installation/frontend",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"04 - Web Application"},sidebar:"tutorialSidebar",previous:{title:"03 - Infrastructure",permalink:"/rad-lab/docs/rad-lab-ui/ui_installation/infrastructure"},next:{title:"05 - Publishing Modules",permalink:"/rad-lab/docs/rad-lab-ui/ui_installation/publishing-modules"}},f={},m=(e=>e?p(e):p)((e=>({projectId:"",setProjectId:t=>e({projectId:t})}))),h=[{value:"First Time Use",id:"first-time-use",level:2},{value:"Returning Firebase User",id:"returning-firebase-user",level:2},{value:"Configure the Webapp",id:"configure-the-webapp",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Firebase app",id:"firebase-app",level:3},{value:"RAD Lab UI Configuration",id:"rad-lab-ui-configuration",level:3},{value:"Deploy Webapp",id:"deploy-webapp",level:2},{value:"RAD Lab UI Webpage",id:"rad-lab-ui-webpage",level:2}],b=()=>{const e=m((e=>e.setProjectId));return(0,a.kt)("div",null,(0,a.kt)("label",{htmlFor:"projectId",name:"projectId"},"RAD Lab UI Project ID"),(0,a.kt)("input",{id:"projectId",style:{borderRadius:"0.25rem",padding:"0.5rem",fontSize:"1rem",marginLeft:"1rem",marginBottom:"1rem"},type:"text",onChange:t=>e(t.target.value)}))},g=e=>{let{href:t,fallback:n,children:r}=e;const o=m((e=>e.projectId)),i=""!==o?t.replace("${RLUI_PROJECT_ID}",o):n;return(0,a.kt)("a",{href:i},r)},k=e=>{let{success:t,fallback:n,children:r}=e;const o=m((e=>e.projectId));return o?t(o):n},y={toc:h,ProjectIdInput:b,ProjectIdLink:g,ProjectIdText:k};function v(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},y,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The RAD Lab UI application is a Firebase application, which requires a number of manual steps to complete the installation."),(0,a.kt)("p",null,"To retrieve the correct project ID, either open a web browser and go to the ",(0,a.kt)("a",{parentName:"p",href:"https://console.cloud.google.com"},"Google Cloud console")," or run the following command in the ",(0,a.kt)("inlineCode",{parentName:"p"},"radlab-ui/automation/terraform/infrastructure")," folder:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'echo "$(terraform show -json | jq -r .values.outputs.project_id.value)"\n')),(0,a.kt)("admonition",{title:"Dynamic Documentation",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"Add your Project ID here to have the documentation be be customized to your Google Cloud project")),(0,a.kt)(b,{mdxType:"ProjectIdInput"}),(0,a.kt)("h1",{id:"add-firebase"},"Add Firebase"),(0,a.kt)("admonition",{type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"If you've never used Firebase in your Google Cloud organization before, please follow ",(0,a.kt)("a",{parentName:"p",href:"#first-time-use"},"First Time Use"),".  If you already have Firebase projects running in your Google Cloud organization or you have in the past, please execute ",(0,a.kt)("a",{parentName:"p",href:"#returning-firebase-user"},"Returning Firebase User"),"."),(0,a.kt)("p",{parentName:"admonition"},"If you're not sure, simply follow the steps as described in ",(0,a.kt)("a",{parentName:"p",href:"#first-time-use"},"First Time Use"),".")),(0,a.kt)("h2",{id:"first-time-use"},"First Time Use"),(0,a.kt)("p",null,"Open the ",(0,a.kt)("a",{parentName:"p",href:"https://console.firebase.google.com"},"Firebase console"),' and click on "Create a project" (or add Firebase to an existing project). When prompted with "Enter your project name", enter the project ID you copied from the previous step, and accept the Firebase terms and conditions. Confirm the Firebase billing plan when prompted (and if necessary) and step through the remaining steps in the wizard.'),(0,a.kt)("p",null,"NOTE: Firebase analytics does not impact the deployment of the RAD Lab UI application, so feel free to select whatever you think makes most sense for your deployment."),(0,a.kt)("p",null,"Run the following commands in a terminal or command window:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# Replace [PROJECT_ID] with the actual project ID.\nexport RLUI_PROJECT_ID=$(terraform show -json | jq -r .values.outputs.project_id.value)\n\n# Install Firebase Tools\nnpm install -g firebase-tools\n\n# Switch to the webapp directory (rad-lab/radlab-ui/webapp)\ncd ../../../webapp\n\n# Login to Firebase. If you are already logged in with the correct user, feel free to continue. If not, run firebase login:add and firebase login:use to select the correct user.\nfirebase login --no-localhost\n\n# Set the RAD Lab UI project as the default project\nfirebase use ${RLUI_PROJECT_ID}\n\n# Upload Firestore rules\nfirebase deploy --only firestore:rules\n\n# Upload Firestore indexes\nfirebase deploy --only firestore:indexes\n")),(0,a.kt)("h2",{id:"returning-firebase-user"},"Returning Firebase User"),(0,a.kt)("admonition",{title:"first time",type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"Only execute these steps if you already have one or more Firebase applications in your Google Cloud organization.  If that is not the case, or you are not sure, please run the steps in the previous section, titled ",(0,a.kt)("a",{parentName:"p",href:"#first-time-use"},"First time Firebase use"),".")),(0,a.kt)("p",null,"Run the following commands in a terminal or command window:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# Replace [PROJECT_ID] with the actual project ID.\nexport RLUI_PROJECT_ID=$(terraform show -json | jq -r .values.outputs.project_id.value)\n\n# Install Firebase Tools\nnpm install -g firebase-tools\n\n# Switch to the webapp directory\ncd ../../../webapp\n\n# Login to Firebase. If you are already logged in with the correct user, feel free to continue. If not, run firebase login:add and firebase login:use to select the correct user.\nfirebase login --no-localhost\n\n# Add Firebase to the Google Cloud project\nfirebase projects:addfirebase ${RLUI_PROJECT_ID}\n\n# Set the RAD Lab UI project as the default project\nfirebase use ${RLUI_PROJECT_ID}\n\n# Upload Firestore rules\nfirebase deploy --only firestore:rules\n\n# Upload Firestore indexes\nfirebase deploy --only firestore:indexes\n")),(0,a.kt)("h2",{id:"configure-the-webapp"},"Configure the Webapp"),(0,a.kt)("p",null,"For these next steps, open the ",(0,a.kt)(g,{href:"https://console.firebase.google.com/project/${RLUI_PROJECT_ID}/settings/general",fallback:"https://console.firebase.google.com",mdxType:"ProjectIdLink"},"Firebase Console")," and open the Project that corresponds to ",(0,a.kt)(k,{success:e=>(0,a.kt)("code",null,e),fallback:(0,a.kt)("code",null,"$RLUI_PROJECT_ID"),mdxType:"ProjectIdText"}),"."),(0,a.kt)("h3",{id:"authentication"},"Authentication"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("strong",{parentName:"li"},"Project Overview")," in the sidebar on the left"),(0,a.kt)("li",{parentName:"ol"},"On the page that opens, click on ",(0,a.kt)("strong",{parentName:"li"},"Authentication")),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("strong",{parentName:"li"},"Get Started"),", ",(0,a.kt)("strong",{parentName:"li"},"Sign-in method")," and select ",(0,a.kt)("strong",{parentName:"li"},"Google")," underneath ",(0,a.kt)("strong",{parentName:"li"},"Additional providers")),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("strong",{parentName:"li"},"Enable")," and provide a valid ",(0,a.kt)("strong",{parentName:"li"},"Project support email")),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("strong",{parentName:"li"},"Save"))),(0,a.kt)("p",null,"As a final step, go Authentication > Settings and click on ",(0,a.kt)("strong",{parentName:"p"},"Authorized domains"),". Add the domain of the App Engine application: ",(0,a.kt)(k,{success:e=>(0,a.kt)("code",null,e,".uc.r.appspot.com"),fallback:(0,a.kt)("code",null,"$RLUI_PROJECT_ID.uc.r.appspot.com"),mdxType:"ProjectIdText"}),". You can also get this value by running the following command in the ",(0,a.kt)("inlineCode",{parentName:"p"},"radlab-ui/automation/terraform/infrastructure")," folder:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'echo "$(cd ../automation/terraform/infrastructure && terraform show -json | jq -r .values.outputs.app_engine_url.value)"\n')),(0,a.kt)("h3",{id:"firebase-app"},"Firebase app"),(0,a.kt)("p",null,"The final step is to add the configuration to your local directory. Navigate to ",(0,a.kt)(g,{href:"https://console.firebase.google.com/project/${RLUI_PROJECT_ID}/settings/general",fallback:"https://console.firebase.google.com",mdxType:"ProjectIdLink"},"Firebase Console")," and go to your Project settings:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Project settings for your Firebase project",src:n(2446).Z,width:"456",height:"563"})),(0,a.kt)("p",null,"Add a Web Application by clicking on the ",(0,a.kt)("inlineCode",{parentName:"p"},"</>"),"-icon at the bottom of the page:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Web application settings",src:n(5279).Z,width:"770",height:"208"})),(0,a.kt)("p",null,"Set the ",(0,a.kt)("strong",{parentName:"p"},"App nickname")," to ",(0,a.kt)("strong",{parentName:"p"},"RAD Lab UI"),", click on ",(0,a.kt)("strong",{parentName:"p"},"Register app"),":"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Web application settings",src:n(678).Z,width:"445",height:"391"})),(0,a.kt)("p",null,"Click on ",(0,a.kt)("strong",{parentName:"p"},"Continue to console"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Web application settings - finalization",src:n(7148).Z,width:"471",height:"584"})),(0,a.kt)("h3",{id:"rad-lab-ui-configuration"},"RAD Lab UI Configuration"),(0,a.kt)("p",null,"We are now going to create the local configuration files to be able to deploy the web application to your Firebase environment.  To execute the steps in these sections, return to your Terminal or Cloud Shell."),(0,a.kt)("admonition",{title:"Environments",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"We are making the assumption here that both development and production will point to the same configuration. If you choose to approach this differently, feel free to update the files and use different values for your ",(0,a.kt)("inlineCode",{parentName:"p"},"development")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"production")," environments.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Firebase Configuration")),(0,a.kt)("p",null,"Run ",(0,a.kt)("inlineCode",{parentName:"p"},"./gen_local_config.sh")," and you will be prompted to provide two values:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Prompt")),(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"Explanation")))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Github API URL"),(0,a.kt)("td",{parentName:"tr",align:null},"API URL for your Git repository. This will be in the format ",(0,a.kt)("a",{parentName:"td",href:"https://api.github.com/repos/%7Bowner%7D/%7Brepo_name%7D"},"https://api.github.com/repos/{owner}/{repo_name}"))))),(0,a.kt)("p",null,"This will generate two configuration files, one for local development and one for production development."),(0,a.kt)("h2",{id:"deploy-webapp"},"Deploy Webapp"),(0,a.kt)("p",null,"Run the following commands to deploy the application to your newly created Firebase environment."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# Install all components locally\nnpm install\n\n# Deploy the application\nnpm run deploy\n")),(0,a.kt)("h2",{id:"rad-lab-ui-webpage"},"RAD Lab UI Webpage"),(0,a.kt)("p",null,"After successful completion, you should be able to access the RAD Lab UI via ",(0,a.kt)("inlineCode",{parentName:"p"},"$RLUI_PROJECT_ID.uc.r.appspot.com")," in the browser."),(0,a.kt)("p",null,"If you are having issues signing in, please review the ",(0,a.kt)("a",{parentName:"p",href:"../setup-gcp#authorizing-users"},"Authorizing Users")," section."))}v.isMDXComponent=!0},678:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/add_firebase_one-90b405592e53ebe523c1734970655b85.png"},7148:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/add_firebase_two-8a8e80c095345907a23d9934f256e8fc.png"},2446:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/settings-ae92d48f14dffc4e1550b92d343f0c38.png"},5279:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/web_settings-d51a31ee5e11f5fee485cdda1da5d12a.png"},3250:(e,t,n)=>{var r=n(7294);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,l=r.useLayoutEffect,s=r.useDebugValue;function p(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(r){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return l((function(){o.value=n,o.getSnapshot=t,p(o)&&u({inst:o})}),[e,n,t]),i((function(){return p(o)&&u({inst:o}),e((function(){p(o)&&u({inst:o})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},139:(e,t,n)=>{var r=n(7294),o=n(1688);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useSyncExternalStore,l=r.useRef,s=r.useEffect,p=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var c=l(null);if(null===c.current){var d={hasValue:!1,value:null};c.current=d}else d=c.current;c=p((function(){function e(e){if(!s){if(s=!0,i=e,e=r(e),void 0!==o&&d.hasValue){var t=d.value;if(o(t,e))return l=t}return l=e}if(t=l,a(i,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(i=e,l=n)}var i,l,s=!1,p=void 0===n?null:n;return[function(){return e(t())},null===p?void 0:function(){return e(p())}]}),[t,n,r,o]);var f=i(e,c[0],c[1]);return s((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},1688:(e,t,n)=>{e.exports=n(3250)},2798:(e,t,n)=>{e.exports=n(139)}}]);